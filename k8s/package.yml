#  ------------------------------------------------------------
#   Copyright (c) Microsoft Corporation.  All rights reserved.
#   Licensed under the MIT License (MIT). See License.txt in the repo root for license information.
#  ------------------------------------------------------------

apiVersion: apps/v1beta1 # for versions before 1.6.0 use extensions/v1beta1
kind: Deployment
metadata:
  name: package-service
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: package-service
        version: 0.1.0
        bc: shipping
    spec:
      containers:
      - name: package-service
        image: <container repo>/package-service:0.1.0
        env:
        - name: CONNECTION_STRING
          valueFrom:
            secretKeyRef:
              name: package-secrets
              key: mongodb-pwd
        - name: COLLECTION_NAME
          value: packages
        - name: CORRELATION_HEADER
          value: l5d-ctx-trace
        - name: LOG_LEVEL
          value: error
        ports:
        - containerPort: 80
        imagePullPolicy: Always
---
apiVersion: v1
kind: Service
metadata:
  name: package-service
spec:
  selector:
    app: package-service
  ports:
    - port: 80
 